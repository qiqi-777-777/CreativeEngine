import React, { useState, useEffect, useRef } from 'react';
import { 
  Settings, 
  ChevronRight, 
  Home, 
  Sparkles, 
  User, 
  Send,
  Mic,
  Image as ImageIcon,
  Paperclip,
  MoreHorizontal,
  Bot,
  Zap,
  BookOpen,
  Briefcase,
  ZoomIn,
  ZoomOut,
  Maximize,
  Search,
  ChevronLeft,
  Volume2,
  List,
  ChevronDown
} from 'lucide-react';

export default function App() {
  const [currentDesign, setCurrentDesign] = useState(2); // é»˜è®¤é€‰ä¸­ç¬¬ä¸‰å¥—ä»¥ä¾¿æµ‹è¯•
  const [scale, setScale] = useState(0.85); 

  const designs = [
    { id: 0, name: '01. å®˜æ–¹æ ‡å‡†ç‰ˆ (å»¶ç»­é¦–é¡µè“)', theme: 'standard' },
    { id: 1, name: '02. ç°ä»£å¯¹è¯ç‰ˆ (æ°”æ³¡å¼)', theme: 'modern_chat' },
    { id: 2, name: '03. æç®€ç™½åº•ç‰ˆ (ç±»ChatGPT)', theme: 'minimal' },
    { id: 3, name: '04. æ¯›ç»ç’ƒå¹»å½©ç‰ˆ', theme: 'glass' },
    { id: 4, name: '05. è¯­éŸ³ä¸»å¯¼ç‰ˆ', theme: 'voice_first' },
    { id: 5, name: '06. å¡ç‰‡å¼•å¯¼ç‰ˆ (ä¾§é‡çµæ„Ÿ)', theme: 'cards' },
    { id: 6, name: '07. æš—å¤œç§‘æŠ€ç‰ˆ', theme: 'dark_cyber' },
    { id: 7, name: '08. å•†åŠ¡é¡¾é—®ç‰ˆ', theme: 'enterprise' },
    { id: 8, name: '09. å¿«æ·æŒ‡ä»¤ç‰ˆ', theme: 'actions' },
    { id: 9, name: '10. æ²‰æµ¸å¼¥æ•£å…‰ç‰ˆ', theme: 'immersive' },
  ];

  return (
    <div className="flex h-screen w-full bg-gray-100 font-sans overflow-hidden">
      {/* ä¾§è¾¹æ§åˆ¶æ  */}
      <div className="w-80 bg-white border-r border-gray-200 flex flex-col h-full z-20 shadow-xl overflow-y-auto hidden md:flex shrink-0">
        <div className="p-6 border-b border-gray-100">
          <h1 className="text-xl font-bold text-gray-800">AIåŠ©æ‰‹ UIæ–¹æ¡ˆåº“</h1>
          <p className="text-sm text-gray-500 mt-2">Project: åˆ›äº«å¼•æ“ (Youth Engine)</p>
          <div className="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100">
            <p className="text-xs text-blue-800 font-medium">è®¾è®¡ç›®æ ‡ï¼šä¿®å¤åŸç‰ˆäº¤äº’é€»è¾‘(è¾“å…¥æ¡†ç½®åº•)ï¼Œå¢å¼ºAIç§‘æŠ€æ„Ÿä¸å®˜æ–¹å“ç‰Œæ„Ÿã€‚</p>
          </div>
        </div>
        <div className="flex-1 p-4 space-y-3">
          {designs.map((d, idx) => (
            <button
              key={d.id}
              onClick={() => setCurrentDesign(d.id)}
              className={`w-full text-left px-4 py-3 rounded-xl transition-all duration-300 flex items-center justify-between group ${
                currentDesign === idx 
                  ? 'bg-blue-500 text-white shadow-blue-200 shadow-lg transform scale-105' 
                  : 'bg-gray-50 text-gray-600 hover:bg-gray-100 hover:scale-102'
              }`}
            >
              <span className="font-medium text-sm">{d.name}</span>
              <div className={`w-2 h-2 rounded-full ${currentDesign === idx ? 'bg-white' : 'bg-gray-300 group-hover:bg-gray-400'}`}></div>
            </button>
          ))}
        </div>
      </div>

      {/* ç§»åŠ¨ç«¯èœå• */}
      <div className="md:hidden fixed top-0 left-0 right-0 z-50 bg-white p-2 flex overflow-x-auto gap-2 shadow-sm">
         {designs.map((d, idx) => (
            <button
              key={d.id}
              onClick={() => setCurrentDesign(d.id)}
              className={`whitespace-nowrap px-3 py-1 rounded-full text-xs font-medium ${
                 currentDesign === idx ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-600'
              }`}
            >
              {idx + 1}
            </button>
         ))}
      </div>

      {/* å±•ç¤ºåŒºåŸŸ */}
      <div className="flex-1 flex flex-col bg-gray-200 relative overflow-hidden">
        {/* é¡¶éƒ¨å·¥å…·æ  */}
        <div className="h-12 bg-white/80 backdrop-blur border-b border-gray-200 flex items-center justify-between px-4 z-10">
          <span className="text-xs text-gray-500 font-mono">Viewport: 430 x 932 px</span>
          <div className="flex items-center gap-2">
            <button onClick={() => setScale(s => Math.max(0.5, s - 0.1))} className="p-1.5 hover:bg-gray-100 rounded text-gray-600">
              <ZoomOut size={16}/>
            </button>
            <span className="text-xs font-medium w-12 text-center">{(scale * 100).toFixed(0)}%</span>
            <button onClick={() => setScale(s => Math.min(1.5, s + 0.1))} className="p-1.5 hover:bg-gray-100 rounded text-gray-600">
              <ZoomIn size={16}/>
            </button>
            <div className="w-px h-4 bg-gray-300 mx-2"></div>
            <button onClick={() => setScale(1)} className="p-1.5 hover:bg-gray-100 rounded text-gray-600 flex gap-1 items-center text-xs">
              <Maximize size={14}/> 100%
            </button>
          </div>
        </div>

        {/* æ»šåŠ¨åŒºåŸŸ */}
        <div className="flex-1 overflow-auto flex justify-center p-8 bg-[#e5e7eb]">
          <div className="relative transition-transform duration-200 ease-out origin-top" style={{ transform: `scale(${scale})`, marginBottom: `${(932 * scale) - 932}px` }}>
             <PhoneFrame>
                <DesignRenderer type={designs[currentDesign].theme} />
             </PhoneFrame>
          </div>
        </div>
      </div>
    </div>
  );
}

const DesignRenderer = ({ type }) => {
  // èŠå¤©äº¤äº’çŠ¶æ€
  const [inputText, setInputText] = useState('');
  const [messages, setMessages] = useState([]);
  const [isTyping, setIsTyping] = useState(false);
  const messagesEndRef = useRef(null);

  // åˆ‡æ¢ä¸»é¢˜æ—¶æ¸…ç©ºèŠå¤©è®°å½•
  useEffect(() => {
    setMessages([]);
    setInputText('');
    setIsTyping(false);
  }, [type]);

  // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages, isTyping]);

  // å‘é€æ¶ˆæ¯å¤„ç†å‡½æ•°
  const handleSend = (text) => {
    const query = typeof text === 'string' ? text : inputText;
    if (!query.trim()) return;

    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    setMessages(prev => [...prev, { role: 'user', content: query }]);
    setInputText('');
    setIsTyping(true);

    // æ¨¡æ‹Ÿ AI æ€è€ƒå’Œå›å¤
    setTimeout(() => {
      setIsTyping(false);
      setMessages(prev => [...prev, { 
        role: 'assistant', 
        content: `è¿™æ˜¯å…³äºâ€œ${query}â€çš„æ¨¡æ‹Ÿå›å¤ã€‚åœ¨å®é™…æ¥å…¥å¤§æ¨¡å‹APIåï¼Œè¿™é‡Œå°†ä¸ºæ‚¨å±•ç¤ºè¯¦ç»†çš„æ”¿ç­–è§£è¯»ã€å»ºè®®æˆ–ç”Ÿæˆçš„æ–¹æ¡ˆã€‚\n\néœ€è¦æˆ‘ä¸ºæ‚¨åšè¿›ä¸€æ­¥çš„æ‹†è§£å—ï¼Ÿ` 
      }]);
    }, 1500);
  };

  // å»ºè®®æé—®æ•°æ®
  const suggestions = [
    "å¦‚ä½•ç”³è¯·å¤§å­¦ç”Ÿåˆ›ä¸šè¡¥è´´æ”¿ç­–ï¼Ÿ",
    "æˆ‘æƒ³äº†è§£æœ€æ–°çš„ç§‘æŠ€åˆ›æ–°æ‰¶æŒæ”¿ç­–",
    "å¦‚ä½•åˆ¶å®šä¸€ä»½è§„èŒƒçš„å•†ä¸šè®¡åˆ’ä¹¦ï¼Ÿ",
    "åˆåˆ›ä¼ä¸šæ³¨å†Œæµç¨‹å’Œæ³¨æ„äº‹é¡¹ï¼Ÿ"
  ];

  // çŠ¶æ€æ 
  const StatusBar = ({ theme = 'light' }) => (
    <div className={`w-full h-[44px] px-6 flex justify-between items-end pb-2 text-[15px] font-semibold z-50 ${theme === 'dark' ? 'text-white' : 'text-gray-900'}`}>
      <span>14:59</span>
      <div className="flex gap-1.5 items-center">
        <div className="h-[10px] w-[16px] bg-current rounded-[2px] opacity-100 flex items-center justify-center border border-current">
            <div className="h-full w-[80%] bg-current"></div>
        </div>
      </div>
    </div>
  );

  // 1. å®˜æ–¹æ ‡å‡†ç‰ˆ (Standard)
  if (type === 'standard') {
    return (
      <div className="h-full w-full bg-[#F5F7FA] flex flex-col font-sans relative">
        <div className="bg-[#3B82F6] pb-4 rounded-b-[24px] shrink-0 shadow-sm relative z-10">
           <StatusBar theme="dark" />
           <div className="px-5 pt-2 flex items-center justify-between text-white">
              <div className="flex items-center gap-3">
                 <div className="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/30">
                    <Sparkles size={20} className="text-white" />
                 </div>
                 <div>
                    <h1 className="text-[18px] font-bold">AIæ”¿ç­–é¡¾é—®</h1>
                    <p className="text-[11px] opacity-80">æ™ºèƒ½è§£ç­”åˆ›ä¸šç–‘é—®ï¼Œç²¾å‡†åŒ¹é…æ”¿ç­–</p>
                 </div>
              </div>
              <MoreHorizontal size={24} className="opacity-80" />
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-4 pt-6 pb-28">
           <div className="flex gap-3 mb-6">
              <div className="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0">
                 <Bot size={18} className="text-blue-600" />
              </div>
              <div className="bg-white p-4 rounded-[16px] rounded-tl-none shadow-sm max-w-[85%]">
                 <p className="text-[14px] text-gray-800 leading-relaxed">
                   æ‚¨å¥½ï¼æˆ‘æ˜¯åˆ›äº«å¼•æ“AIåŠ©æ‰‹ã€‚æ‚¨å¯ä»¥å‘æˆ‘å’¨è¯¢åˆ›ä¸šæ”¿ç­–ã€èµ„é‡‘ç”³æŠ¥ã€å•†ä¸šè®¡åˆ’ç­‰é—®é¢˜ã€‚
                 </p>
                 <div className="mt-4 pt-3 border-t border-gray-100">
                    <p className="text-[12px] text-gray-500 mb-2">æ‚¨å¯ä»¥è¯•ç€é—®æˆ‘ï¼š</p>
                    <div className="space-y-2">
                       {suggestions.map((text, i) => (
                          <div key={i} className="bg-[#F3F4F6] text-[#3B82F6] text-[13px] px-3 py-2 rounded-[8px] cursor-pointer hover:bg-blue-50 transition-colors">
                             {text}
                          </div>
                       ))}
                    </div>
                 </div>
              </div>
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full bg-white border-t border-gray-100 p-3 pb-5 z-20">
           <div className="flex items-center gap-2">
              <button className="p-2 text-gray-400 hover:text-gray-600"><Mic size={22}/></button>
              <div className="flex-1 bg-[#F3F4F6] rounded-full flex items-center px-4 h-10">
                 <input type="text" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." className="bg-transparent flex-1 text-[14px] outline-none text-gray-700" />
              </div>
              <button className="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-md active:scale-95 transition-transform">
                 <Send size={18} className="ml-1" />
              </button>
           </div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 2. ç°ä»£å¯¹è¯ç‰ˆ (Modern Chat)
  if (type === 'modern_chat') {
    return (
      <div className="h-full w-full bg-[#Eef2f6] flex flex-col font-sans relative">
        <div className="bg-white/80 backdrop-blur-md pb-2 shrink-0 border-b border-gray-200/50 sticky top-0 z-20">
           <StatusBar />
           <div className="px-5 pt-2 flex items-center justify-center relative">
              <h1 className="text-[16px] font-bold text-gray-800">åˆ›äº«AIåŠ©æ‰‹</h1>
              <div className="absolute right-5 flex gap-3">
                 <Settings size={20} className="text-gray-500" />
              </div>
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-4 pt-6 pb-28">
           <div className="flex justify-center mb-6">
              <span className="text-[11px] bg-black/5 text-gray-500 px-3 py-1 rounded-full">14:59</span>
           </div>
           
           <div className="flex gap-3 mb-6">
              <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center shrink-0 shadow-md">
                 <Sparkles size={20} className="text-white" />
              </div>
              <div className="flex flex-col gap-2 max-w-[80%]">
                 <div className="bg-white p-3.5 rounded-[20px] rounded-tl-[4px] shadow-sm text-[14px] text-gray-800">
                    æ™šä¸Šå¥½ï¼ğŸ‘‹ åˆ›ä¸šè·¯ä¸Šé‡åˆ°ä»€ä¹ˆéš¾é¢˜äº†å—ï¼Ÿ
                 </div>
                 
                 <div className="flex flex-wrap gap-2 mt-1">
                    {suggestions.slice(0, 3).map((text, i) => (
                       <div key={i} className="bg-blue-50/80 border border-blue-100 text-blue-600 text-[12px] px-3 py-1.5 rounded-full cursor-pointer active:bg-blue-100">
                          {text}
                       </div>
                    ))}
                 </div>
              </div>
           </div>
        </div>

        <div className="absolute bottom-[96px] w-full px-4 z-20">
           <div className="bg-white rounded-[24px] shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-gray-100 p-2 flex items-center gap-2">
              <button className="p-2 text-gray-400 bg-gray-50 rounded-full"><ImageIcon size={20}/></button>
              <input type="text" placeholder="å‘AIæé—®..." className="bg-transparent flex-1 text-[15px] outline-none text-gray-700 px-2" />
              <button className="bg-[#3B82F6] w-9 h-9 rounded-full flex items-center justify-center text-white">
                 <Sparkles size={16} />
              </button>
           </div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 3. æç®€ç™½åº•ç‰ˆ (Minimal) - å¢åŠ çœŸå®äº¤äº’æµ‹è¯•
  if (type === 'minimal') {
    return (
      <div className="h-full w-full bg-white flex flex-col font-sans relative">
        <div className="pb-2 shrink-0 sticky top-0 z-20 bg-white">
           <StatusBar />
           <div className="px-5 pt-2 flex items-center justify-between">
              <List size={24} className="text-gray-800 cursor-pointer" />
              <div className="font-bold text-[16px] text-gray-900 flex items-center gap-1 cursor-pointer">
                 Youth Engine AI <ChevronDown size={14} className="text-gray-400"/>
              </div>
              <div className="w-6"></div>
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-5 pt-8 pb-28 flex flex-col">
           {messages.length === 0 ? (
             // --- æ²¡å›ç­”çš„é¡µé¢ (ç©ºçŠ¶æ€) ---
             <div className="flex flex-col items-center justify-center flex-1 pb-10">
               <div className="w-16 h-16 bg-black rounded-full flex items-center justify-center mb-6">
                  <Sparkles size={32} className="text-white" />
               </div>
               <h2 className="text-[24px] font-bold text-gray-900 mb-8">ä»Šå¤©èƒ½å¸®æ‚¨ä»€ä¹ˆï¼Ÿ</h2>
               
               <div className="w-full space-y-3">
                  {suggestions.map((text, i) => (
                     <div 
                        key={i} 
                        onClick={() => handleSend(text)}
                        className="w-full border border-gray-200 p-4 rounded-[16px] text-[14px] text-gray-700 font-medium flex justify-between items-center hover:bg-gray-50 cursor-pointer active:scale-[0.98] transition-all"
                     >
                        {text}
                        <ChevronRight size={16} className="text-gray-400" />
                     </div>
                  ))}
               </div>
             </div>
           ) : (
             // --- å›ç­”çš„é¡µé¢ (å¯¹è¯çŠ¶æ€) ---
             <div className="flex flex-col gap-6 w-full pb-4">
               {messages.map((msg, i) => (
                 <div key={i} className={`flex gap-3 ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                   {msg.role === 'assistant' && (
                     <div className="w-8 h-8 rounded-full bg-black flex items-center justify-center shrink-0 mt-1">
                        <Sparkles size={16} className="text-white" />
                     </div>
                   )}
                   <div 
                     className={`max-w-[85%] text-[15px] leading-relaxed whitespace-pre-wrap ${
                       msg.role === 'user' 
                        ? 'bg-[#f3f4f6] text-gray-900 px-4 py-2.5 rounded-[20px] rounded-tr-[4px]' 
                        : 'text-gray-800 pt-1'
                     }`}
                   >
                     {msg.content}
                   </div>
                 </div>
               ))}

               {/* AI è¾“å…¥ä¸­çŠ¶æ€åŠ¨ç”» */}
               {isTyping && (
                 <div className="flex gap-3 justify-start">
                   <div className="w-8 h-8 rounded-full bg-black flex items-center justify-center shrink-0 mt-1">
                      <Sparkles size={16} className="text-white" />
                   </div>
                   <div className="text-gray-800 pt-3 flex items-center gap-1.5 px-2">
                      <div className="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce"></div>
                      <div className="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.15s'}}></div>
                      <div className="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.3s'}}></div>
                   </div>
                 </div>
               )}
               {/* ç”¨äºè‡ªåŠ¨æ»šåŠ¨çš„é”šç‚¹ */}
               <div ref={messagesEndRef} />
             </div>
           )}
        </div>

        {/* åº•éƒ¨è¾“å…¥æ¡†åŒºåŸŸ */}
        <div className="absolute bottom-[88px] w-full bg-gradient-to-t from-white via-white to-transparent pt-6 pb-2 px-5 z-20">
           <div className="border border-gray-300 rounded-[20px] bg-white flex items-end p-2 min-h-[50px] focus-within:border-black transition-colors shadow-[0_2px_10px_rgba(0,0,0,0.02)]">
              <button className="p-2 text-gray-500 mb-0.5 hover:text-black transition-colors">
                 <Paperclip size={20}/>
              </button>
              <textarea 
                value={inputText}
                onChange={(e) => setInputText(e.target.value)}
                onKeyDown={(e) => {
                  if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSend(inputText);
                  }
                }}
                placeholder="Message AI..." 
                className="bg-transparent flex-1 text-[15px] outline-none text-gray-800 px-2 py-2.5 resize-none h-[40px] max-h-[100px] block" 
                rows="1"
              ></textarea>
              <button 
                onClick={() => handleSend(inputText)}
                disabled={!inputText.trim() || isTyping}
                className={`w-8 h-8 rounded-full flex items-center justify-center mb-1 transition-colors ${
                  inputText.trim() && !isTyping ? 'bg-black text-white cursor-pointer active:scale-90' : 'bg-gray-200 text-gray-400 cursor-not-allowed'
                }`}
              >
                 <Send size={14} className="ml-0.5" />
              </button>
           </div>
           <div className="text-center mt-2 text-[10px] text-gray-400">AIå¯ä»¥æä¾›åˆ›ä¸šå»ºè®®ï¼Œä½†è¯·è‡ªè¡Œæ ¸å®æ”¿ç­–ç»†èŠ‚ã€‚</div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 4. æ¯›ç»ç’ƒå¹»å½©ç‰ˆ (Glass)
  if (type === 'glass') {
    return (
      <div className="h-full w-full bg-[#f8fafc] flex flex-col font-sans relative overflow-hidden">
        <div className="absolute top-[-10%] left-[-20%] w-[300px] h-[300px] bg-blue-400 rounded-full mix-blend-multiply filter blur-[70px] opacity-40"></div>
        <div className="absolute top-[20%] right-[-10%] w-[250px] h-[250px] bg-purple-400 rounded-full mix-blend-multiply filter blur-[70px] opacity-40"></div>
        <div className="absolute bottom-[10%] left-[10%] w-[350px] h-[350px] bg-cyan-300 rounded-full mix-blend-multiply filter blur-[70px] opacity-30"></div>

        <div className="pb-2 shrink-0 relative z-20">
           <StatusBar />
           <div className="px-5 pt-2 flex items-center justify-between">
              <h1 className="text-[20px] font-bold text-gray-800 tracking-tight">AI æ™ºèƒ½é—®ç­”</h1>
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-5 pt-4 pb-28 relative z-10">
           <div className="bg-white/40 backdrop-blur-xl border border-white/60 p-5 rounded-[24px] shadow-[0_8px_32px_rgba(0,0,0,0.05)] mb-6">
              <div className="flex items-center gap-3 mb-4">
                 <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-blue-600 to-purple-600 flex items-center justify-center text-white">
                    <Sparkles size={20} />
                 </div>
                 <div className="font-bold text-gray-800 text-[16px]">Hi, æˆ‘æ˜¯åˆ›ä¸šå¯¼å¸ˆ</div>
              </div>
              <p className="text-[14px] text-gray-700 leading-relaxed">
                 æˆ‘å·²ç»å­¦ä¹ äº†æœ€æ–°çš„å…¨çœåˆ›ä¸šæ‰¶æŒæ”¿ç­–ã€è¡Œä¸šç ”ç©¶æŠ¥å‘Šã€‚æ‚¨å¯ä»¥éšæ—¶å‘æˆ‘æé—®ã€‚
              </p>
           </div>

           <div className="grid grid-cols-2 gap-3">
              {suggestions.map((text, i) => (
                 <div key={i} className="bg-white/50 backdrop-blur-md border border-white/50 p-3 rounded-[16px] text-[13px] text-gray-700 hover:bg-white/80 transition-all shadow-sm">
                    {text}
                 </div>
              ))}
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full px-5 pb-4 z-20">
           <div className="bg-white/70 backdrop-blur-xl rounded-[24px] shadow-lg border border-white p-1.5 flex items-center gap-1">
              <div className="flex-1 flex items-center px-3">
                 <input type="text" placeholder="è¾“å…¥ä½ æƒ³äº†è§£çš„æ”¿ç­–..." className="bg-transparent w-full text-[14px] outline-none text-gray-800 py-2.5" />
              </div>
              <button className="bg-gradient-to-r from-blue-500 to-purple-500 w-10 h-10 rounded-full flex items-center justify-center text-white shadow-md">
                 <Send size={18} className="ml-1" />
              </button>
           </div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 5. è¯­éŸ³ä¸»å¯¼ç‰ˆ (Voice First)
  if (type === 'voice_first') {
    return (
      <div className="h-full w-full bg-white flex flex-col font-sans relative">
        <div className="pb-2 shrink-0">
           <StatusBar />
           <div className="px-5 pt-2 flex items-center justify-center relative text-gray-800">
              <span className="font-bold">AI è¯­éŸ³åŠ©æ‰‹</span>
           </div>
        </div>

        <div className="flex-1 flex flex-col items-center justify-center px-6 pb-40">
           <div className="text-center mb-12">
              <h2 className="text-[22px] font-bold text-gray-800 mb-2">æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®æ‚¨ï¼Ÿ</h2>
              <p className="text-[14px] text-gray-500">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ç›´æ¥å¯¹æˆ‘è¯´è¯</p>
           </div>
           
           <div className="w-full space-y-3 mb-8">
              {suggestions.slice(0, 3).map((text, i) => (
                 <div key={i} className="bg-gray-50 rounded-full px-4 py-3 text-[14px] text-gray-700 text-center truncate shadow-sm border border-gray-100">
                    "{text}"
                 </div>
              ))}
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full bg-gradient-to-t from-white via-white to-transparent pt-10 pb-6 flex flex-col items-center z-20">
           <div className="relative flex items-center justify-center w-[80px] h-[80px]">
              <div className="absolute inset-0 bg-blue-100 rounded-full animate-ping opacity-70"></div>
              <div className="absolute inset-2 bg-blue-200 rounded-full animate-pulse"></div>
              <button className="relative z-10 w-[64px] h-[64px] bg-[#3B82F6] rounded-full flex items-center justify-center text-white shadow-xl hover:bg-blue-600 transition-colors">
                 <Mic size={32} />
              </button>
           </div>
           <button className="mt-4 text-[13px] text-gray-400 flex items-center gap-1 hover:text-gray-600">
              <List size={14} /> åˆ‡æ¢åˆ°é”®ç›˜è¾“å…¥
           </button>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 6. å¡ç‰‡å¼•å¯¼ç‰ˆ (Cards)
  if (type === 'cards') {
    return (
      <div className="h-full w-full bg-[#F3F4F6] flex flex-col font-sans relative">
        <div className="bg-white pb-3 shrink-0 shadow-sm rounded-b-[24px]">
           <StatusBar />
           <div className="px-5 pt-2">
              <h1 className="text-[20px] font-bold text-gray-900">æ¢ç´¢ AI èƒ½åŠ›</h1>
              <p className="text-[12px] text-gray-500 mt-1">é€‰æ‹©ä¸€ä¸ªä¸»é¢˜ï¼Œå¿«é€Ÿå¼€å¯å¯¹è¯</p>
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-4 pt-4 pb-32">
           <div className="grid grid-cols-2 gap-3 mb-6">
              {[
                {icon: BookOpen, title: 'æ”¿ç­–è§£è¯»', desc: 'è¡¥è´´/èµ„è´¨ç”³æŠ¥', color: 'bg-blue-50 text-blue-600'},
                {icon: Briefcase, title: 'å•†ä¸šè®¡åˆ’', desc: 'BPæ¡†æ¶æ’°å†™', color: 'bg-purple-50 text-purple-600'},
                {icon: Zap, title: 'åˆ›æ„å¤´è„‘é£æš´', desc: 'å¯»æ‰¾åˆ›ä¸šçµæ„Ÿ', color: 'bg-orange-50 text-orange-600'},
                {icon: Search, title: 'è¡Œä¸šè°ƒæŸ¥', desc: 'æœ€æ–°å¸‚åœºæ•°æ®', color: 'bg-teal-50 text-teal-600'},
              ].map((item, i) => (
                 <div key={i} className="bg-white p-4 rounded-[16px] shadow-sm border border-gray-100 cursor-pointer hover:shadow-md">
                    <div className={`w-10 h-10 rounded-[12px] ${item.color} flex items-center justify-center mb-3`}>
                       <item.icon size={20} />
                    </div>
                    <div className="font-bold text-[14px] text-gray-800">{item.title}</div>
                    <div className="text-[11px] text-gray-400 mt-1">{item.desc}</div>
                 </div>
              ))}
           </div>
           
           <h3 className="font-bold text-gray-800 text-[15px] mb-3 ml-1">çƒ­é—¨æé—®</h3>
           <div className="space-y-2">
              {suggestions.map((text, i) => (
                 <div key={i} className="bg-white px-4 py-3 rounded-[12px] text-[13px] text-gray-700 shadow-sm flex items-center justify-between">
                    <span className="truncate pr-4">{text}</span>
                    <Sparkles size={14} className="text-blue-400 shrink-0" />
                 </div>
              ))}
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full px-4 pb-4 z-20">
           <div className="bg-white rounded-[16px] shadow-lg border border-gray-100 p-1 flex items-center gap-2">
              <input type="text" placeholder="ç›´æ¥è¾“å…¥æ‚¨çš„é—®é¢˜..." className="bg-transparent flex-1 text-[14px] outline-none text-gray-800 px-3 py-2.5" />
              <button className="bg-[#1F2937] px-4 h-9 rounded-[12px] flex items-center justify-center text-white text-[13px] font-medium mr-1">
                 å‘é€
              </button>
           </div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 7. æš—å¤œç§‘æŠ€ç‰ˆ (Dark Cyber)
  if (type === 'dark_cyber') {
    return (
      <div className="h-full w-full bg-[#0F172A] flex flex-col font-sans relative text-slate-200">
        <div className="pb-3 shrink-0 border-b border-slate-800 bg-[#0F172A]/90 backdrop-blur sticky top-0 z-20">
           <StatusBar theme="dark" />
           <div className="px-5 pt-2 flex items-center justify-between">
              <div className="flex items-center gap-2">
                 <div className="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></div>
                 <h1 className="text-[16px] font-bold text-white font-mono tracking-wider">ENGINE_AI <span className="text-cyan-400">v2.0</span></h1>
              </div>
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-4 pt-6 pb-28 font-mono">
           <div className="mb-6">
              <div className="text-cyan-400 text-[12px] mb-1">SYSTEM &gt; INITIALIZED</div>
              <div className="bg-slate-800/50 border border-slate-700 p-4 rounded-[12px] text-[13px] text-slate-300">
                 [AI Agent Online] <br/>
                 Ready to assist with policy analysis and business strategy. What is your query?
              </div>
           </div>

           <div className="space-y-3">
              <div className="text-slate-500 text-[12px] mb-2">SUGGESTED_QUERIES:</div>
              {suggestions.map((text, i) => (
                 <div key={i} className="border border-slate-700 bg-slate-900/50 p-3 rounded-[8px] text-[13px] text-slate-300 hover:border-cyan-500/50 hover:text-cyan-300 transition-colors cursor-pointer flex items-center gap-2">
                    <span className="text-cyan-600">&gt;</span> {text}
                 </div>
              ))}
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full px-4 pb-4 z-20 bg-gradient-to-t from-[#0F172A] via-[#0F172A] to-transparent pt-6">
           <div className="bg-slate-900 rounded-[12px] border border-slate-700 focus-within:border-cyan-500/50 p-1 flex items-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.05)]">
              <span className="pl-3 text-cyan-500 font-mono">&gt;</span>
              <input type="text" placeholder="Type command..." className="bg-transparent flex-1 text-[14px] outline-none text-slate-200 py-2.5 font-mono placeholder-slate-600" />
              <button className="bg-cyan-500/10 text-cyan-400 w-10 h-10 rounded-[8px] flex items-center justify-center hover:bg-cyan-500/20 mr-0.5">
                 <Zap size={18} />
              </button>
           </div>
        </div>
        <BottomNav active="ai" theme="dark" />
      </div>
    );
  }

  // 8. å•†åŠ¡é¡¾é—®ç‰ˆ (Enterprise)
  if (type === 'enterprise') {
    return (
      <div className="h-full w-full bg-[#F8FAFC] flex flex-col font-sans relative">
        <div className="bg-[#1E293B] pb-4 shrink-0 rounded-b-[16px] shadow-md relative z-10">
           <StatusBar theme="dark" />
           <div className="px-5 pt-3 flex items-center gap-4 text-white">
              <div className="w-12 h-12 bg-gradient-to-br from-[#D4AF37] to-[#B8860B] rounded-full flex items-center justify-center shadow-lg border-2 border-[#1E293B]">
                 <Bot size={24} className="text-[#1E293B]" />
              </div>
              <div>
                 <h1 className="text-[18px] font-bold font-serif text-[#D4AF37]">é‡‘ç‰Œæ”¿ç­–é¡¾é—®</h1>
                 <p className="text-[11px] text-slate-300">7x24å°æ—¶ ä¸ºæ‚¨çš„ä¼ä¸šæŠ¤èˆª</p>
              </div>
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-5 pt-6 pb-28">
           <div className="bg-white border border-slate-200 p-5 rounded-[12px] shadow-sm mb-6 relative">
              <div className="absolute -top-3 left-6 bg-[#1E293B] text-[#D4AF37] text-[10px] px-2 py-0.5 rounded font-bold uppercase tracking-wide">
                 Expert Mode
              </div>
              <p className="text-[14px] text-slate-700 leading-relaxed mt-1">
                 å°Šè´µçš„ä¼ä¸šä¸»ï¼Œæ‚¨å¥½ã€‚æˆ‘æ˜¯æ‚¨çš„ä¸“å±æ”¿ç­–ä¸æˆ˜ç•¥é¡¾é—®ã€‚é€šè¿‡å¤§æ•°æ®åŒ¹é…ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›ç²¾å‡†çš„è¡¥è´´ç”³é¢†æ–¹æ¡ˆåŠèèµ„å»ºè®®ã€‚
              </p>
           </div>

           <div className="text-[13px] font-bold text-slate-800 mb-3 ml-1">é«˜é¢‘å’¨è¯¢é¢†åŸŸ</div>
           <div className="space-y-2.5">
              {suggestions.map((text, i) => (
                 <div key={i} className="bg-white border border-slate-200 px-4 py-3.5 rounded-[8px] text-[13px] text-slate-700 shadow-sm flex items-center justify-between hover:border-[#D4AF37] cursor-pointer">
                    <span className="font-medium">{text}</span>
                    <ChevronRight size={16} className="text-slate-400" />
                 </div>
              ))}
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full bg-white border-t border-slate-200 p-4 z-20 shadow-[0_-4px_10px_rgba(0,0,0,0.02)]">
           <div className="flex items-center gap-3">
              <div className="flex-1 bg-slate-100 rounded-[8px] flex items-center px-4 h-11 border border-slate-200 focus-within:border-[#1E293B] transition-colors">
                 <input type="text" placeholder="è¾“å…¥ä¼ä¸šéœ€æ±‚..." className="bg-transparent flex-1 text-[14px] outline-none text-slate-800" />
              </div>
              <button className="h-11 px-5 bg-[#1E293B] rounded-[8px] flex items-center justify-center text-[#D4AF37] font-bold text-[14px] shadow-md">
                 å’¨è¯¢
              </button>
           </div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 9. å¿«æ·æŒ‡ä»¤ç‰ˆ (Actions)
  if (type === 'actions') {
    return (
      <div className="h-full w-full bg-[#F9FAFB] flex flex-col font-sans relative">
        <div className="bg-white pb-2 shrink-0 border-b border-gray-200">
           <StatusBar />
           <div className="px-5 pt-2 flex items-center justify-center relative">
              <h1 className="text-[17px] font-bold text-gray-900">å·¥ä½œå°åŠ©æ‰‹</h1>
           </div>
        </div>

        <div className="flex-1 overflow-y-auto px-4 pt-6 pb-40">
           <div className="flex justify-center mb-8">
              <div className="text-center">
                 <div className="w-16 h-16 bg-blue-100 text-blue-600 rounded-[20px] mx-auto flex items-center justify-center mb-3 transform rotate-3">
                    <Sparkles size={32} className="-rotate-3"/>
                 </div>
                 <h2 className="text-[20px] font-bold text-gray-800">Hi, æ—©ä¸Šå¥½</h2>
                 <p className="text-[13px] text-gray-500 mt-1">ä»Šå¤©éœ€è¦å¤„ç†ä»€ä¹ˆä»»åŠ¡ï¼Ÿ</p>
              </div>
           </div>
           
           <div className="space-y-2">
              {suggestions.map((text, i) => (
                 <div key={i} className="bg-white p-3.5 rounded-[12px] text-[13px] text-gray-700 shadow-sm border border-gray-100 flex items-center gap-3">
                    <div className="w-2 h-2 rounded-full bg-blue-400"></div>
                    {text}
                 </div>
              ))}
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full bg-white border-t border-gray-100 pt-3 pb-5 px-4 z-20 shadow-[0_-10px_30px_rgba(0,0,0,0.05)]">
           <div className="flex gap-2 overflow-x-auto no-scrollbar mb-3 pb-1">
              {['âœ¨ å†™BPå¤§çº²', 'ğŸ“Š æŸ¥æ”¿ç­–', 'ğŸ“ æ€»ç»“æ–‡æ¡£', 'ğŸ” æ‰¾æ¡ˆä¾‹'].map((action, i) => (
                 <button key={i} className="shrink-0 bg-gray-50 border border-gray-200 px-3 py-1.5 rounded-full text-[12px] text-gray-600 font-medium whitespace-nowrap active:bg-gray-100">
                    {action}
                 </button>
              ))}
           </div>
           
           <div className="flex items-center gap-2 bg-[#F3F4F6] rounded-[16px] p-1.5 pl-3">
              <input type="text" placeholder="è¾“å…¥æŒ‡ä»¤æˆ–æé—®..." className="bg-transparent flex-1 text-[14px] outline-none text-gray-800 py-1.5" />
              <button className="bg-blue-600 w-8 h-8 rounded-[12px] flex items-center justify-center text-white">
                 <Send size={14} className="ml-0.5" />
              </button>
           </div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  // 10. æ²‰æµ¸å¼¥æ•£å…‰ç‰ˆ (Immersive)
  if (type === 'immersive') {
    return (
      <div className="h-full w-full flex flex-col font-sans relative bg-white overflow-hidden">
        <div className="absolute inset-0 z-0">
           <div className="absolute top-0 left-0 w-full h-[50%] bg-gradient-to-b from-blue-50 to-white"></div>
           <div className="absolute top-[-10%] right-[-10%] w-[400px] h-[400px] bg-blue-100 rounded-full mix-blend-multiply filter blur-[80px] opacity-70"></div>
           <div className="absolute top-[20%] left-[-20%] w-[300px] h-[300px] bg-indigo-100 rounded-full mix-blend-multiply filter blur-[80px] opacity-70"></div>
        </div>

        <div className="pb-2 shrink-0 relative z-20">
           <StatusBar />
        </div>

        <div className="flex-1 overflow-y-auto px-6 pt-12 pb-32 relative z-10 flex flex-col">
           <h1 className="text-[32px] font-bold text-gray-900 tracking-tight leading-tight mb-2">
              å¼€å¯æ™ºèƒ½<br/>åˆ›ä¸šæ¢ç´¢
           </h1>
           <p className="text-[14px] text-gray-500 mb-10">åŸºäºå…¨ç½‘æ•°æ®çš„æ”¿ç­–ä¸å•†ä¸šå¼•æ“</p>

           <div className="space-y-4 flex-1">
              {suggestions.map((text, i) => (
                 <div key={i} className="group relative bg-white/60 backdrop-blur-sm p-4 rounded-[20px] text-[15px] text-gray-800 font-medium shadow-[0_8px_30px_rgba(0,0,0,0.04)] border border-white hover:bg-white hover:shadow-[0_8px_30px_rgba(0,0,0,0.08)] transition-all cursor-pointer flex justify-between items-center">
                    <span className="relative z-10">{text}</span>
                    <div className="w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white text-blue-500 transition-colors">
                       <ChevronRight size={16} />
                    </div>
                 </div>
              ))}
           </div>
        </div>

        <div className="absolute bottom-[88px] w-full px-6 pb-6 z-20 bg-gradient-to-t from-white via-white to-transparent pt-12">
           <div className="bg-white rounded-full shadow-[0_10px_40px_rgba(0,0,0,0.1)] border border-gray-100 p-2 flex items-center gap-2">
              <div className="w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-blue-600">
                 <Sparkles size={20} />
              </div>
              <input type="text" placeholder="å‘å¼•æ“æé—®..." className="bg-transparent flex-1 text-[15px] outline-none text-gray-800 px-2" />
              <button className="bg-gray-900 w-10 h-10 rounded-full flex items-center justify-center text-white mr-1">
                 <Send size={16} className="ml-1" />
              </button>
           </div>
        </div>
        <BottomNav active="ai" />
      </div>
    );
  }

  return <div>Design not found</div>;
};

// ----------------------------------------------------------------------
// è¾…åŠ©ç»„ä»¶
// ----------------------------------------------------------------------

const PhoneFrame = ({ children }) => (
  <div className="w-[430px] h-[932px] bg-black rounded-[55px] p-[10px] shadow-[0_0_50px_rgba(0,0,0,0.2)] relative border-[6px] border-[#222] ring-4 ring-[#111] overflow-hidden shrink-0">
    <div className="absolute top-[20px] left-1/2 -translate-x-1/2 w-[120px] h-[35px] bg-black rounded-full z-[100] flex items-center justify-center">
      <div className="w-[80px] h-[80px] rounded-full bg-black/50 blur-xl absolute -z-10"></div>
    </div>
    <div className="w-full h-full bg-white rounded-[45px] overflow-hidden relative">
       {children}
       <div className="absolute bottom-[8px] left-1/2 -translate-x-1/2 w-[130px] h-[5px] bg-black/90 rounded-full z-[100]"></div>
    </div>
  </div>
);

const BottomNav = ({ active, theme = 'light' }) => {
  const isDark = theme === 'dark';
  return (
    <div className={`absolute bottom-0 w-full h-[88px] flex items-start pt-3 justify-around z-50 ${isDark ? 'bg-[#111827] border-t border-gray-800' : 'bg-white border-t border-gray-100'}`}>
      <div className={`flex flex-col items-center gap-1 cursor-pointer w-20 ${active === 'home' ? 'text-[#3B82F6]' : isDark ? 'text-gray-500' : 'text-gray-400'}`}>
         <Home size={26} strokeWidth={active === 'home' ? 2.5 : 2} />
         <span className="text-[10px] font-medium mt-0.5">é¦–é¡µ</span>
      </div>
      <div className={`flex flex-col items-center gap-1 cursor-pointer w-20 ${active === 'ai' ? 'text-[#3B82F6]' : isDark ? 'text-gray-500' : 'text-gray-400'}`}>
         <Sparkles size={26} strokeWidth={active === 'ai' ? 2.5 : 2} fill={active === 'ai' ? "currentColor" : "none"} />
         <span className="text-[10px] font-medium mt-0.5">AIåŠ©æ‰‹</span>
      </div>
      <div className={`flex flex-col items-center gap-1 cursor-pointer w-20 ${active === 'my' ? 'text-[#3B82F6]' : isDark ? 'text-gray-500' : 'text-gray-400'}`}>
         <User size={26} strokeWidth={active === 'my' ? 2.5 : 2} />
         <span className="text-[10px] font-medium mt-0.5">æˆ‘çš„</span>
      </div>
    </div>
  );
};